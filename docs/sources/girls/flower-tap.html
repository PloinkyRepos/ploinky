<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
  <title>Flower Tap</title>
  <style>
    :root { --bg:#0f1320; --fg:#fff; }
    html,body{height:100%;margin:0;background:var(--bg);color:var(--fg);font-family:system-ui,sans-serif}
    canvas{width:100%;height:100%;display:block;touch-action:none}
    .hud{position:fixed;top:10px;left:12px;right:12px;display:flex;justify-content:space-between;gap:8px;}
    .pill{background:#1e2a45;color:#fff;border:1px solid #2c3e66;border-radius:999px;padding:6px 10px;font-weight:700}
  </style>
  </head>
<body>
  <div class="hud"><div class="pill">Score: <span id="s">0</span></div><div class="pill" id="restart">Restart</div></div>
  <canvas id="c"></canvas>
  <script>
    const c=document.getElementById('c'),x=c.getContext('2d');let W,H,flowers=[],score=0,last=0;function R(){W=c.width=c.clientWidth;H=c.height=c.clientHeight}addEventListener('resize',R,{passive:true});R();
    const col=['#ff79c6','#ffd166','#8be9fd','#c6ffdd','#a78bfa'];
    function rand(a,b){return Math.random()*(b-a)+a}
    function spawn(){const r=rand(14,30);return {x:rand(r,W-r),y:H+r,r,vy:-rand(20,60)/60,c:col[(Math.random()*col.length)|0]}}
    function addFlower(){ flowers.push(spawn()); }
    for(let i=0;i<8;i++)addFlower();
    function petal(cx,cy,r,a){x.beginPath();x.moveTo(cx,cy);x.quadraticCurveTo(cx+r*Math.cos(a-0.6),cy+r*Math.sin(a-0.6),cx+r*0.8*Math.cos(a),cy+r*0.8*Math.sin(a));x.quadraticCurveTo(cx+r*Math.cos(a+0.6),cy+r*Math.sin(a+0.6),cx,cy);x.fill()}
    function drawFlower(f){x.save();x.translate(f.x,f.y);x.fillStyle=f.c;for(let i=0;i<6;i++){petal(0,0,f.r, i*Math.PI/3)}x.fillStyle='#ffe082';x.beginPath();x.arc(0,0,f.r*0.35,0,Math.PI*2);x.fill();x.restore()}
    function loop(t){const dt=Math.min(32,t-last);last=t;update(dt);x.clearRect(0,0,W,H);for(const f of flowers)drawFlower(f);requestAnimationFrame(loop)}
    function update(dt){for(const f of flowers){f.y+=f.vy*dt}for(let i=0;i<flowers.length;i++){if(flowers[i].y<-flowers[i].r){flowers[i]=spawn();score=Math.max(0,score-1);document.getElementById('s').textContent=score}}}
    function tap(xp,yp){for(let i=0;i<flowers.length;i++){const f=flowers[i],dx=xp-f.x,dy=yp-f.y;if(dx*dx+dy*dy<=(f.r*0.9)*(f.r*0.9)){flowers[i]=spawn();score++;document.getElementById('s').textContent=score;return}}}
    c.addEventListener('pointerdown',e=>{const r=c.getBoundingClientRect();tap(e.clientX-r.left,e.clientY-r.top)})
    document.getElementById('restart').onclick=()=>{score=0;document.getElementById('s').textContent=score;flowers=[];for(let i=0;i<8;i++)spawn()}
    requestAnimationFrame(loop);
  </script>
</body>
</html>
