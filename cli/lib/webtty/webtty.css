/* Theme variables and layout */
body[data-theme='dark'] {
  --bg: #0b141a;
  --panel: #111b21;
  --term-bg: #0b141a;
  --ink: #e9edef;
  --muted: #8696a0;
  --border: rgba(255,255,255,0.08);
  --accent: #00a884;
  --accent-weak: rgba(0, 168, 132, 0.25);
  --incoming: #1f2c34;
  --outgoing: #005c4b;
  --outgoing-2: #137a66;
  --header: #202c33;
  --btn: #00a884;
  --btn-ink: #04231e;
  --btn-hover: #029b7d;
  --chat-bg: #0b141a;
}
body[data-theme='light'] {
  --bg: #ece5dd;
  --panel: #ffffff;
  --term-bg: #ffffff;
  --ink: #111b21;
  --muted: #54656f;
  --border: rgba(0,0,0,0.08);
  --accent: #00a884;
  --accent-weak: rgba(0, 168, 132, 0.18);
  --incoming: #ffffff;
  --outgoing: #d9fdd3;
  --outgoing-2: #c7f7c2;
  --header: #00a884;
  --btn: #00a884;
  --btn-ink: #052e16;
  --btn-hover: #029b7d;
  --chat-bg: #efeae2;
}
html, body { height: 100%; margin: 0; background: var(--bg); color: var(--ink); font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial; }
.bar { position: fixed; top: 0; left: 0; right: 0; height: 48px; background: var(--header); color: var(--ink); display: flex; align-items: center; padding: 0 12px; box-shadow: 0 1px 0 rgba(0,0,0,0.2); z-index: 5; }
.title { font-weight: 700; letter-spacing: 0.2px; }
.status { margin-left: auto; font-size: 12px; opacity: 0.95; padding: 2px 8px; border-radius: 10px; background: rgba(99, 102, 241, 0.18); }
.tabs { display: flex; gap: 8px; margin-left: 12px; padding: 2px; background: rgba(148,163,184,0.12); border-radius: 999px; }
.tab { padding: 6px 12px; border-radius: 999px; cursor: pointer; font-size: 13px; color: var(--ink); opacity: .8; }
.tab.active { background: var(--accent-weak); opacity: 1; }
.meta { position: fixed; top: 48px; left: 0; right: 0; height: 32px; display: flex; align-items: center; gap: 16px; padding: 0 16px; color: var(--muted); font-size: 12px; background: rgba(148,163,184,0.07); border-bottom: 1px solid var(--border); z-index: 4; backdrop-filter: blur(4px); }
.meta .k { color: #cbd5e1; }
.pad { height: 80px; }
.outer { height: calc(100% - 80px); padding: 16px; box-sizing: border-box; }
.frame { height: 100%; width: 100%; max-width: 1200px; margin: 0 auto; background: var(--panel); border: 1px solid var(--border); border-radius: 16px; box-shadow: 0 20px 40px rgba(0,0,0,0.35), inset 0 10px 30px rgba(2,6,23,0.6); overflow: hidden; }
#console, #chat { height: 100%; display: none; }
#console.active, #chat.active { display: block; }
#term { height: 100%; width: 100%; }

/* Chat styles */
.chat-wrap { display: flex; flex-direction: column; height: 100%; background: var(--chat-bg); position: relative; }
.chat-wrap::before { content: ''; position: absolute; inset: 0; pointer-events: none; opacity: 0.06; background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='160' height='160' viewBox='0 0 160 160'><rect width='160' height='160' fill='none'/><g fill='%23ffffff'><text x='10' y='28' font-size='14' opacity='0.8'>01 10 01</text><text x='90' y='56' font-size='12' opacity='0.6'>10 01</text><text x='40' y='98' font-size='10' opacity='0.5'>0 1 0 1</text><text x='120' y='130' font-size='12' opacity='0.6'>01</text><text x='70' y='150' font-size='8' opacity='0.4'>0101</text></g></svg>"); background-size: 220px 220px; }
.chat-list { flex: 1; overflow-y: auto; padding: 16px; display: flex; gap: 10px; flex-direction: column; position: relative; }
.msg { max-width: 78%; padding: 10px 12px; border-radius: 14px; font-size: 14px; line-height: 1.45; word-wrap: break-word; border: 1px solid transparent; }
.srv { align-self: flex-start; background: var(--incoming); border-top-left-radius: 4px; border-color: rgba(148,163,184,0.12); }
.me { align-self: flex-end; background: linear-gradient(180deg, var(--outgoing-2), var(--outgoing)); border-top-right-radius: 4px; color: #eafff3; }
.msg .meta { font-size: 11px; color: #9aa6b2; margin-top: 6px; }
.composer { display: flex; gap: 8px; padding: 12px; border-top: 1px solid var(--border); background: rgba(0,0,0,0.05); align-items: flex-end; }
.composer textarea { width: 100%; min-height: 44px; max-height: 200px; resize: none; padding: 12px 14px; background: var(--panel); border: 1px solid var(--border); border-radius: 14px; color: inherit; outline: none; transition: border .15s ease; white-space: pre-wrap; }
.composer textarea:focus { border-color: #7dd3fc; box-shadow: 0 0 0 2px rgba(125, 211, 252, 0.15) inset; }
.composer button { padding: 12px 16px; background: var(--btn); border: none; color: var(--btn-ink); border-radius: 999px; cursor: pointer; font-weight: 700; letter-spacing: .2px; transition: background .15s ease, transform .03s ease; }
.composer button:hover { background: var(--btn-hover); }
.composer button:active { transform: translateY(1px); }
.more { margin-top: 8px; font-size: 12px; color: #cbd5e1; opacity: .9; cursor: pointer; text-decoration: underline; }
.modal-backdrop { position: fixed; inset: 0; background: rgba(0,0,0,0.55); display: none; align-items: center; justify-content: center; z-index: 20; }
.modal { background: var(--panel); border: 1px solid var(--border); border-radius: 12px; padding: 16px; max-width: 90vw; max-height: 80vh; overflow: auto; box-shadow: 0 20px 60px rgba(0,0,0,0.5); }
.modal h3 { margin-top: 0; }
.modal pre { white-space: pre-wrap; font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; font-size: 12px; }
.auth-cover { position: fixed; inset: 0; display: none; align-items: center; justify-content: center; background: rgba(0,0,0,0.78); z-index: 30; backdrop-filter: blur(2px); }
.auth-card { background: var(--panel); color: var(--ink); border: 1px solid rgba(255,255,255,0.18); border-radius: 12px; padding: 20px; width: 360px; box-shadow: 0 24px 72px rgba(0,0,0,0.6); }
.auth-card h2 { margin: 0 0 8px 0; color: var(--ink); letter-spacing: .2px; }
.auth-card input { width: 100%; padding: 12px 14px; background: var(--bg); border: 1px solid rgba(255,255,255,0.18); border-radius: 10px; color: var(--ink); margin-top: 8px; outline: none; }
.auth-card input:focus { border-color: #7dd3fc; box-shadow: 0 0 0 2px rgba(125,211,252,0.2) inset; }
.auth-card button { margin-top: 12px; width: 100%; padding: 12px; background: var(--btn); color: var(--btn-ink); border: none; border-radius: 10px; cursor: pointer; font-weight: 800; letter-spacing: .3px; }
.auth-card button:hover { background: var(--btn-hover); }
.err { color: #fda4af; font-size: 12px; margin-top: 6px; min-height: 16px; }
.theme-btn { margin-left: 12px; padding: 6px 10px; border-radius: 999px; background: rgba(255,255,255,0.15); border: 1px solid var(--border); color: var(--ink); cursor: pointer; font-size: 12px; }

/* Connection banner */
.banner { position: fixed; top: 48px; left: 50%; transform: translateX(-50%); padding: 6px 12px; border-radius: 999px; font-size: 12px; z-index: 6; color: #0f172a; background: #fde68a; border: 1px solid rgba(0,0,0,0.1); box-shadow: 0 2px 10px rgba(0,0,0,0.2); }
.banner.ok { background: #bbf7d0; color: #052e16; }
.banner.err { background: #fecaca; color: #450a0a; }
.banner.hidden { display: none; }
